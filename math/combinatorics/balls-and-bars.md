# Table of contents
- [Table of contents](#table-of-contents)
- [Шары и перегородки](#шары-и-перегородки)
  - [Задача 1](#задача-1)
  - [Задача 2](#задача-2)
- [Решения](#решения)
  - [Задача 1](#задача-1-1)
  - [Задача 2](#задача-2-1)
- [Сочетания с повторениями](#сочетания-с-повторениями)
  - [Решение 1](#решение-1)
  - [Решение 2](#решение-2)

<br>

# Шары и перегородки
## Задача 1
Есть **n разных** ящиков и **k одинаковых** шаров, $`k \ge n`$.<br>
**Сколько** существет способов разложить эти шары по ящикам так, чтобы **ни** одни ящик **не** остался пустым?

<br>

## Задача 2
Есть **n разных** ящиков и **k одинаковых** шаров, $`k \ge n`$.<br>
**Сколько** существет способов разложить эти шары по ящикам так, что **некоторые** ящики могут быть **пустым**?

<br>

# Решения
В решениях будем вместо ящиков использовать **перегородки**.<br>

Чтобы смоделировать **n** *ящиков* достаточно выложить *шары* **в ряд** и вставить между ними **n-1** *перегородок*:<br>
![](/img/balls_and_bars_1.png)

<br>

**n-1** *перегородок* разбивают ряд на **n** *групп*, каждая из которых соответсвует определенному *ящику*.<br>

Соответствие перегородок ящикам:
- **первый** *ящик* - это все, что **слева** от **первой** *перегородки*;
- **второй** *ящик* - это все, что **слева** от **второй** *перегородки*;
- **(n-1)-й** *ящик* - это все, что **слева** от **(n-1)-й** (т.е. **последней**) *перегородки*;
- **n-й** *ящик* - это все, что **справа** от первой *перегородки*;

<br>

Если **две** перегородки идут **подряд**, то это означает, что ящик **пустой**.<br>
Если **слева** от **первой** перегородки **пусто**, то это означает, что **первый** ящик **пустой**.<br>
Если **справа** от **последней** перегородки **пусто**, то это означает, что **n-ый** ящик пустой.<br>

<br>

Итого, у нас имеется:
- **n-1 одинаковых** *перегородок*;
- **k одинаковых** *шаров*;

<br>

## Задача 1
В задаче есть требование, чтобы **ни** одни ящик **не** остался пустым. Это означает, что **не** может быть **2** перегородки подряд.<br>
Если выложить шары в ряд, то существует **k-1** мест между шарами, куда мы можем вставить перегородки так, чтобы **никакие 2** из них **не** оказались **рядом**.<br>

Получается, что количество способов разложить **k одинаковых** *шаров* по **n разных** *ящиков* так, чтобы **ни** один *ящик* **не** остался **пустым** равно количеству способов расставить **n-1** *перегородок* по **k-1** *местам*.

Т.о. получаем: $`C_{n-1}^{k-1}`$.<br>

<br>

## Задача 2
Сформируем последовательность из **k+n-1** ячеек:<br>
![](/img/balls_and_bars_2.png)

<br>

Проиндексируем все ячейки в этой последовательности, начиная с **1** до **k+n-1** включительно.<br>

Получается, что у нас имеется:
- $`C_{n-1}^{k+n-1}`$ способов выбрать **индексы** для $`n-1`$ **перегородок**;
- $`C_{k}^{k+n-1}`$ способов выбрать **индексы** для $`k`$ **шаров**;

<br>

Можно рассуждать еще так: после заполнения этих ячеек перегородками и шарами мы получим последовательность с повторениями.<br>

Согласно формуле **перестановок с повторениями**, мы получим: $`P_{k,n-1}^{k+n-1} = {\frac {(k+n-1)!}{k!(n-1)!}}`$.<br>

<br>

# Сочетания с повторениями
Имеется множество $`X`$ из **n различных** элементов: $`X = \{1,2,\dots,n\}`$.<br>
**Сколько** существует способов выбрать **k** объектов ($`k \ge n`$) из множества $`X`$ так, что элементы в **выборке** могут **повторяться**?.<br>

<br>

## Решение 1
Данная задача изоморфна **задаче 2**:
- роль **ящиков** играет множество **n** различных **классов** элементов;
- роль **белых шаров** - количество элементов **k**, которые **нужно выбрать**;

<br>

Т.о. каждый **ящик** соответвует определённому **классу** элементов, а **количество шаров** в ящике соответствует **количеству** элементов данного **класса**, которые попали в выборку.<br>

<br>

Получается, число сочетаний из **n** по **k** ($`k \ge n`$) **с повторениями**: $`\overline{C^{n}_{k}} = C^{k+n-1}_{k} = C_{n-1}^{k+n-1}`$.<br>

<br>

## Решение 2
Каждому элементу элементу множества $`X`$ нужно сопоставить число (от **1** до **k** включительно) - количество раз, которое данный элемент **войдет** в выборку.<br>
Т.к. есть **n** элементов, то это означает что у нас есть **n** выборов, на каждом из которых мы имеем **k** вариантов для выбора (**k** чисел: от **1** до **k** включительно).<br>
Т.о. **общее количество вариантов** - это $`k^{n}`$.<br>
Но из этого набора вариантов, нас интересуют только такие последовательности, у которых **сумма** всех чисел в последовательности равна **k**.<br>
