# Разбиения
Существует несколько классов задач на разбиения. Во всех таких задачах требуется **разбить** **набор** каких-то объектов на **несколько непересекающихся множеств**.<br>

1. Разбиения **без фиксации** размеров множеств, на которые разбиваем набор объектов.
2. Разбиения **с фиксацией** размеров множеств, на которые разбиваем набор объектов:
   - **упорядоченные** разбиения: **размеры** множеств **фиксированны**, а их **порядок важен**;
   - **не**упорядоченные разбиения: **размеры** множеств **фиксированны**, а их **порядок** **не** важен;

<br>

# Числа Стирлинга 2-рода
**Числа Стирлинга 2-рода** $`S(n, k)`$ - количество **неу**порядоченных (?) разбиений **n**-элементного множества на **k** непустых подмножеств.<br>

Существует **7** способов разбиения множества из **4** элементов на **2** части:
$`{1,2,3}{4}`$;
$`{1,2}{3,4}`$;
$`{1,2,4}{3}`$;
$`{1,3}{2,4}`$;
$`{1,3,4}{2}`$;
$`{1,4}{2,3}`$;
$`{2,3,4}{1}`$;

**Следовательно**, $`S(4, 2) = 7`$.

<br>

# Числа Белла
**Числа Белла** $`B_{n}`$ - количество всех **не**упорядоченных (?) разбиений **n**-элементного множества.<br>
**Число Белла** можно вычислить как **сумму** *чисел Стирлинга второго рода*.<br>

Рассмотрим множество из **3**-х элементов $`\{a,b,c\}`$.
Существует всего **5** различных способов его **не**упорядоченных разбиений:
- $`\{\{a\},\{b\},\{c\}\}`$;
- $`\{\{a\},\{b,c\}\}`$;
- $`\{\{b\},\{a,c\}\}`$;
- $`\{\{c\},\{a,b\}\}`$;
- $`\{\{a,b,c\}\}`$;

**Следовательно**, $`B_{3}=5`$.<br>


# Упорядоченные разбиения
Допустим, есть множество $`X = \{1,2,\dots,n\}`$, мощность: $`|X| = n`$.<br>
Требуется разбить $`X`$ на $`s`$ не **пересекающихся** подмножеств, каждое из которых **размера** $`n_{i}`$.<br>
При упорядоченном разбиении, **2** **разных** подмножества с разными индексами $`x_{i}`$ и $`x_{j}`$ считаются **различными**.<br>

<br>

||1|2|...|s-1|s|
|:-|:------|:--------|:--------|:---------|:-|
||$`x_{1}`$|$`x_{2}`$|...|$`x_{s-1}`$|$`x_{1}`$|
||$`n_{1}`$|$`n_{2}`$|...|$`n_{s-1}`$|$`n_{1}`$|

<br>

Сумма всех $`n_{i}`$ равна $`n`$: $`n_{1} + n_{2} + ... + n_{s} = n`$.<br>

<br>

Получается, что:
- выбрать $`n_{1}`$ элементов для $`x_{1}`$ мы можем $`C^{n}_{n_{1}}`$ способами;
- выбрать $`n_{2}`$ элементов для $`x_{2}`$ мы уже можем $`C^{n-n_{1}}_{n_{2}}`$ способами;
- ...
- выбрать $`n_{s}`$ элементов для $`x_{s}`$ мы уже можем $`C^{n-n_{1}-n_{2}-...-n_{s-1}}_{n_{s}}`$ способами;

<br>

Тогда согласно правилу умножений, количество рзабиений будет:
$`C^{n}_{n_{1}} \cdot C^{n-n_{1}}_{n_{2}} \cdot \dotsc \cdot C^{n-n_{1}-n_{2}-...-n_{s-1}}_{n_{s}}`$.<br>

<br>

Если все перемножить и сократить, то получим:
$`C^{n}_{n_{1}} \cdot C^{n-n_{1}}_{n_{2}} \cdot \dotsc \cdot C^{n-n_{1}-n_{2}-...-n_{s-1}}_{n_{s}} = \frac{n!}{n_{1}!\cdot n_{2}!\cdot \dotsc \cdot n_{s}!}`$.<br>

<br>

# Неупорядоченные разбиения
Допустим, есть множество $`X = \{1,2,\dots,n\}`$, мощность: $`|X| = n`$.<br>
Требуется разбить $`X`$ на $`s`$ не **пересекающихся** подмножеств, каждое из которых **размера** $`n_{i}`$.<br>
При **не**упорядоченном разбиении, **2** **разных** (по набору элементов) подмножества $`x_{i}`$ и $`x_{j}`$ считаются **одинаковыми**, если их **мощности равны**, другими словами, два подмножества $`x_{i}`$ и $`x_{j}`$ **различны** только если **различны** их **мощности**.<br>

<br>

Пусть мы имеем такое разбиение:
|Индекс|Подмножество|Мощность|
|:-|:---|:-----------|
|1|$`x_{1}`$|$`n_{1}=11`$|
|2|$`x_{2}`$|$`n_{2}=9`$|
|3|$`x_{3}`$|$`n_{3}=11`$|
|4|$`x_{4}`$|$`n_{4}=9`$|
|4|$`x_{4}`$|$`n_{4}=9`$|
|5|$`x_{5}`$|$`n_{5}=5`$|
|6|$`x_{6}`$|$`n_{6}=5`$|
|7|$`x_{7}`$|$`n_{7}=7`$|

<br>

Мы видим, что всего есть **4** различных числа:
- пусть $`m_{1}`$ обозначет сколько раз встретилось число **11**: $`m_{1}=2`$;
- пусть $`m_{2}`$ обозначет сколько раз встретилось число **9**: $`m_{2}=3`$;
- пусть $`m_{3}`$ обозначет сколько раз встретилось число **5**: $`m_{3}=2`$;
- пусть $`m_{4}`$ обозначет сколько раз встретилось число **7**: $`m_{4}=1`$;

<br>

Рассмотрим некоторое разбиение. Получается, что подмножества с одинаковой мощностью могут обмениваться своими элементами, все такие полученные разибения будут считаться одинаковыми.
Существует $`m_{i}!`$ способов поменять местами элементы множества с мощностью $`i`$.<br>

<br>

Если имеется **k** групп множеств с **одинаковыми** мощностями, то количество **не**упорядоченных разложений будет в $`m_{1} \cdot m_{2} \cdot \dotsc \cdot m_{k}`$ меньше количества **упорядоченных** разбиений для этих же множеств.<br>

<br>

# Задачи
## Разбиения без фиксации
### Задача
**Сколькими** способами можно разложить **5** конфеты на **3** блюдца?<br>
**Ограничений** на количество конфет в тарелках **нет**, а значит в каждой тарелке может оказаться от **0** до **5** конфет.<br>

#### Решение
Для **каждой конфеты** нужно решить, на **какю тарелку** её положить. Для каждой конфеты есть **5** варианта выбрать блюдце.<br>
Получется, что у нас имеет **3** выбора и для каждого выбора у нас есть **5** варианта выбора.<br>

Т.о. получаем: $`3^{5}`$.

<br>

### Задача
**Сколькими** способами можно разложить **3** конфеты на **3** блюдца?<br>
**Ограничений** на количество конфет в тарелках **нет**, а значит в каждой тарелке может оказаться от **0** до **3** конфет.<br>

#### Решение
Это аналогичная задача, но попробуем пойти другим путём.<br>
Для **каждой тарелки** нужно решить, **сколько конфет** в неё положить.<br>
В таком случае нам нужно рассмотреть **10** **независимых групп** вариантов выбора для каждой из тарелок.<br>
Для каждого такого варианта возникает целое дерево вариантов для других тарелок:
- на **первой** тарелке **0** конфет;
  - на **второй** тарелке **0** конфет;
    - на **третьей** тарелке **3** конфеты;
  - на **второй** тарелке **1** конфета;
    - на **третьей** тарелке **2** конфеты;
  - на **второй** тарелке **2** конфет:
    - на **третьей** тарелке **1** конфеты;
  - на **второй** тарелке **3** конфет:
    - на **третьей** тарелке **0** конфеты;
- на **первой** тарелке **1** конфета;
  - ...
- на **первой** тарелке **2** конфеты;
  - ...
- на **первой** тарелке **3** конфеты;
  - ...

<br>

Для каждого варианта перечислим все возможные варианты выбора:
||Тарелка 1|Тарелка 2|Тарелка 3|Product|
|:-|:------|:--------|:--------|:---------|
|1|$`C^{3}_0=1`$|$`C^{3}_0=1`$|$`C^{3}_3=1`$|$`1`$|
|2|$`C^{3}_0=1`$|$`C^{3}_1=3`$|$`C^{2}_2=1`$|$`3`$|
|3|$`C^{3}_0=1`$|$`C^{3}_2=3`$|$`C^{1}_1=1`$|$`3`$|
|4|$`C^{3}_0=1`$|$`C^{3}_3=1`$|$`C^{0}_0=1`$|$`1`$|
|5|$`C^{3}_1=3`$|$`C^{2}_0=1`$|$`C^{2}_2=1`$|$`3`$|
|6|$`C^{3}_1=3`$|$`C^{2}_1=2`$|$`C^{1}_1=1`$|$`6`$|
|7|$`C^{3}_1=3`$|$`C^{2}_2=1`$|$`C^{0}_0=1`$|$`3`$|
|8|$`C^{3}_2=3`$|$`C^{1}_0=1`$|$`C^{1}_1=1`$|$`3`$|
|9|$`C^{3}_2=3`$|$`C^{1}_1=1`$|$`C^{0}_0=1`$|$`3`$|
|10|$`C^{3}_3=1`$|$`C^{0}_0=1`$|$`C^{0}_0=1`$|$`1`$|

<br>

Далее, варианты в каждой группе перемножаем и суммируем результаты для кжадой из групп.<br>

Т.о. получаем: $`1+3+3+1+3+6+3+3+3+1 = 27 = 3^{3}`$.<br>

<br>

## Упорядоченные разбиения
### Задача
**8** **разных** книг нужно расставить по **3-м** полкам так, чтобы:
- на **верхней** полке оказалась **1** книга;
- на **средней** полке оказалась **3** книги;
- на **нижней** полке оказалась **4** книги;

### Решение
Требуется сделать **упорядоченное разбиение** множества мощности **8** на **3** непересекающиеся подмножества мощностей **1**, **3** и **4**.<br>

Т.о. получаем: $`\frac{8!}{1! \cdot 3! \cdot 4!} = \frac{4! \cdot 5 \cdot 6 \cdot 7 \cdot 8}{6 \cdot 4!} = 280`$.<br>

<br>

## Упорядоченные разбиения
### Задача
**8** **разных** книг нужно расставить по **3-м** полкам так, чтобы:
- на **одной** (не важно какой) полке оказалась **2** книги;
- на **двух** других полках - по **3** книги;

### Решение
Требуется сделать **не**упорядоченное разбиение мноества мощности **8** на **3** непересекающиеся подмножества с мощностями **2**, **3** и **3**.<br>

Мы видим, что подмножество мощности **2** встречается **1** раз, значит $`m_{1} = 1`$.<br>
Мы видим, что подмножество мощности **3** встречается **2** раза, значит $`m_{2} = 1`$.<br>

Т.о. получаем: $`\frac{8!}{2! \cdot 3! \cdot 3! \cdot m_{1}! \cdot m_{2}!} = \frac{4 \cdot \cancel{2} \cdot 7 \cdot \cancel{6} \cdot 5 \cdot 2 \cdot \cancel{2} \cdot \cancel{3} \cdot \cancel{2}}{\cancel{2} \cdot \cancel{6} \cdot \cancel{3} \cdot \cancel{2} \cdot \cancel{2}} = 280`$.<br>
