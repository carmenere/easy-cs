# Сколько ожерелий длины n можно составить из n различных бусинок
Рассмотрим для начала не ожерелья, а цепочки. Из $`n`$ различных бусинок можно составить $`n!`$ различных цепочек.<br>
Если соединить концы таких цепочек то получим ожерелье. В каждом таком ожерелье зафиксируем одну из бусинок, которая соответвует первой бусинке в цепочке до соединения концов.<br>
Если начать вращать ожерелья вокруг центра, то разные начальные цепочки, которые переходят друг в друга, можно считать эквивалентными.<br>
Т.о. все множество $`n!`$ перестановок разбивается на **классы эквивалентности**.<br>

Каждый класс содержит $`n`$ перестановок, которые можно получить:
- **линейным сдвигом** *цепочки* на **1** позицию, влево или вправо;
- **поворотом** *ожерелья* на **1** бусину или на угол $`{\tfrac {360^{\circ}}{n}}`$ ;

<br>

Рассмотрим **линейные сдвиги** *цепочек*. Рассмотрим цепочки из **6** различных бусин. **Пронумерум** все такие цепочки.<br>
Возьмем некоторую цепочку $`123456`$.<br>
Будем её последовательно сдвигать на **1** позицию **6** раз подряд. В результате получим такие цепочки:
- $`123456`$
- $`234561`$
- $`345612`$
- $`456123`$
- $`561234`$
- $`612345`$

<br>

Если **последнюю** цепочку еще раз сдвинуть - то получим **исходную** $`123456`$.<br>
Все эти цепочки образуют один **класс эквивалентности**: после **соединения** **любой** из этих цепочек мы получим одно и то же **ожерелье**.<br>

Таким образом все множество $`n!`$ **различных** цепочек **разбивается** на $`n`$ **классов эквивалентности** или **орбит**.<br>
Каждая из **орбит** является **циклом**, который переходит сам в себя, и соответствует **одному** конкретному ожерелью.<br>

**Итого**: число возможных ожерелий из n различных бусинок: $`{\tfrac {n!^{\circ}}{n}}`$

<br>

# Сколько ожерелий длины n можно составить из k различных бусинок
Если элементы могут **повторяться**, то у **некоторых** ожерелий, но **не** у всех, возникнет **вращательная симметрия**, которая начнет уменьшать общее разных ожерелий.<br>

Сколько ожерелий длины $`n`$ можно составить из $`k`$ различных бусинок?

**Заменим** бусы символами из алфавита.<br>
Дан алфавит длины $`k`$. Из данного алфавита него можно сгенерировать $`k^{n}`$ слов длины $`n`$.<br>
Все множество слов назовем $`X`$.<br>
Сколько орибт в множестве $`X`$ под действием группы $`G = C_{n}`$ вращения правильного **n-угольника**? Порядок группы $`C_{n}`$ **равен** *количеству букв* в слове $`n`$.<br>
<br>

<br>

## Пример 1
$`n=3`$, $`k=2`$.<br>

Всего можем составить $`2^{3}`$ слов **длины** **3** из **2-х** разных символов.<br>

Подействуем на эти слова группой $`G = C_{3}`$ (**порядок** группы $`n=3`$). Группа вращений $`G = C_{3}`$ содержит **3** элемента:
- $`\phi_{0}`$ или поворот на $`360^{\circ}`$ или $`0^{\circ}`$;
- $`\phi_{1}`$ поворот на $`120^{\circ}`$;
- $`\phi_{2}`$ поворот на $`240^{\circ}`$;

<br>

Найдем **неподвижные точки** для каждого из вращений:
- поворот на $`360^{\circ}`$ не изменяет ни одно из слов, поэтому $`Fix(360^{\circ})`$ = 8;
- поворот на $`120^{\circ}`$ не изменяет только 2 слова $`\{000\}`$ и $`\{111\}`$, поэтому $`Fix(120^{\circ})`$ = 2;
- поворот на $`240^{\circ}`$ не изменяет только 2 слова $`\{000\}`$ и $`\{111\}`$, поэтому $`Fix(240^{\circ})`$ = 2;

<br>

Итого, **количество орбит**: $`|X/G| = {\frac {1}{3}}(8 + 2 + 2) = 4`$.<br>
Т.е. все слова разбиываются на **6 классов эквивалентности**, а значит всего можно составить **6** различных **ожерелий**.<br>

<br>

## Пример 2
$`n=4`$, $`k=2`$.<br>

Всего можем составить $`2^{4}`$ слов **длины** **4** из **2-х** разных символов.<br>

Подействуем на эти слова группой $`G = C_{4}`$ (**порядок** группы $`n=4`$). Группа вращений $`G = C_{4}`$ содержит **4** элемента:
- $`\phi_{0}`$ или поворот на $`360^{\circ}`$ или $`0^{\circ}`$;
- $`\phi_{1}`$ поворот на $`90^{\circ}`$;
- $`\phi_{2}`$ поворот на $`180^{\circ}`$;
- $`\phi_{3}`$ поворот на $`270^{\circ}`$;

<br>

Расмотрим **неподвижные точки**:
- поворот на $`360^{\circ}`$ не изменяет ни одно из слов, поэтому $`Fix(360^{\circ})`$ = 16;
- поворот на $`90^{\circ}`$ не изменяет только 2 слова $`\{0000\}`$ и $`\{1111\}`$, поэтому $`Fix(90^{\circ})`$ = 2;
- поворот на $`180^{\circ}`$ не изменяет только 4 слова $`\{0000\}`$, $`\{1111\}`$, $`\{1010\}`$, $`\{0101\}`$, поэтому $`Fix(180^{\circ})`$ = 2;
- поворот на $`270^{\circ}`$ не изменяет только 2 слова $`\{0000\}`$ и $`\{1111\}`$, поэтому $`Fix(270^{\circ})`$ = 2;

<br>

Итого, **количество орбит**: $`|X/G| = {\frac {1}{4}}(16 + 2 + 4 + 2) = 6`$.<br>

Т.е. все слова разбиываются на **6 классов эквивалентности**, а значит всего можно составить **6** различных **ожерелий**.<br>

<br>

**Визуализация**.<br>
Рассмотрим **ожерелье**, соответвующее слову $`\{1010\}`$`$:
![necklace_3](/img/necklace_3.png)

<br>

При повороте на $`180^{\circ}`$; и $`360^{\circ}`$; градусов это *ожерелье* **переходит само в себя** (с точностью до нумерации и раскраски вершин):
![necklace_3](/img/necklace_1.png)

<br>

Рассмотрим 2 **цепочки** соответствующие данному ожерелью:
![necklace_3](/img/necklace_2.png)

<br>

Эти **цепочки** при **линейном сдвиге** на **2** элемента **преходят сами в себя**.<br>
